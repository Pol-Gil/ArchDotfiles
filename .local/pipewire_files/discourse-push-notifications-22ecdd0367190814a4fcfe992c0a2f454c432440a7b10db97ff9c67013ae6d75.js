Ember.TEMPLATES["javascripts/connectors/user-preferences-desktop-notifications/user-push-notification-input"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[22,"push-notification-config"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/connectors/user-preferences-desktop-notifications/user-push-notification-input"}}),Ember.TEMPLATES["javascripts/components/push-notification-config"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["showSetting"]]],null,{"statements":[[0,"  "],[7,"label",true],[10,"class","checkbox-label"],[8],[0,"\\n    "],[7,"input",true],[11,"checked",[24,["currentUser","custom_fields","discourse_push_notifications_prefer_push"]]],[11,"onclick",[28,"action",[[23,0,[]],"change"],[["value"],["target.checked"]]]],[10,"type","checkbox"],[8],[9],[0,"\\n    "],[1,[28,"i18n",["discourse_push_notifications.note"],null],false],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/push-notification-config"}}),define("discourse/plugins/discourse-push-notifications/discourse/initializers/setup-push-notifications",["exports","discourse/lib/plugin-api","discourse/lib/push-notifications"],function(e,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={name:"setup-push-notifications",initialize:function(t){(0,i.withPluginApi)("0.1",function(e){var i=t.lookup("site-settings:main");!Ember.testing&&e.getCurrentUser()&&(i.desktop_push_notifications_enabled?(e.modifyClass("controller:preferences/notifications",{saveAttrNames:["muted_usernames","new_topic_duration_minutes","auto_track_topics_after_msecs","notification_level_when_replying","like_notification_frequency","allow_private_messages","custom_fields"]}),e.modifyClass("component:desktop-notification-config",{isPushNotificationsPreferred:function(){return!(!this.site.mobileView&&!s.keyValueStore.getItem("prefer_push"))&&(0,s.isPushNotificationsSupported)(this.site.mobileView)}}),e.getCurrentUser().custom_fields.discourse_push_notifications_prefer_push?s.keyValueStore.setItem("prefer_push","true"):s.keyValueStore.setItem("prefer_push","")):s.keyValueStore.setItem("prefer_push",""))})}};e.default=t}),define("discourse/plugins/discourse-push-notifications/discourse/components/push-notification-config",["exports","ember-addons/ember-computed-decorators","discourse/lib/push-notifications"],function(e,i,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,n,o,r,u,a,c=Ember.Component.extend((s=c={showSetting:function(){return this.siteSettings.desktop_push_notifications_enabled},actions:{change:function(e){e?(this.currentUser.set("custom_fields.discourse_push_notifications_prefer_push",!0),t.keyValueStore.setItem("prefer_push","true")):(this.currentUser.set("custom_fields.discourse_push_notifications_prefer_push",!1),t.keyValueStore.setItem("prefer_push",""))}}},n="showSetting",o=[i.default],r=Object.getOwnPropertyDescriptor(c,"showSetting"),u=c,a={},Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=o.slice().reverse().reduce(function(e,i){return i(s,n,e)||e},a),u&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(u):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(s,n,a),a=null),c));e.default=c});
//# sourceMappingURL=/assets/plugins/discourse-push-notifications-22ecdd0367190814a4fcfe992c0a2f454c432440a7b10db97ff9c67013ae6d75.js.map