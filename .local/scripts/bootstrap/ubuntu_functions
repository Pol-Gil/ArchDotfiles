#! /usr/bin/env bash
# Author: https://github.com/cuberhaus
flags="-y"
base_install () { ## For windows install it's good to have this
    # Fix some errors and cleanup
    mkdir -p "$XDG_DATA_HOME"/vim/{undo,swap,backup} # Fixes vim
    touch $HOME/.vim/cache/viminfo              # viminfo
    touch $XDG_DATA_HOME/vim/viminfo            # viminfo
    mkdir -p "~/.vim/cache/viminfo"             # vim viminfo
    mkdir $HOME/.cache/zsh
    mkdir $HOME/.cache/vlc
    sudo mkdir /var/lib/samba/usershares

    # System tools
    sudo apt-get $flags install git build-essential file python3 python3-pip npm samba-common-bin fonts-powerline curl arc-theme autoconf automake sassc optipng inkscape gnome-shell libgtk-3-dev pkg-config yarn nodejs
    sudo apt-get $flags install texlive-full doxygen   # Doxygen
    sudo apt-get $flags install ruby-dev

    # Terminal
    sudo apt-get $flags install stow
    sudo apt-get $flags install subversion             # To download repos
    sudo apt-get $flags install neovim                 # Neovim
    sudo apt-get $flags install zsh
    sudo apt-get $flags install htop                   # Show system resources
    sudo apt-get $flags install ranger w3m             # Ranger
    sudo apt-get $flags install vim-gtk                # Vim with full functionality
    sudo apt-get $flags install silversearcher-ag      # Better and faster ack (and grep)
    sudo apt-get $flags install fzf                    # Fuzzy finder
    sudo apt-get $flags install bat                    # Better cat
    sudo apt-get $flags install tmux                   # Terminal multiplexer
    sudo apt-get $flags install ncdu                   # Manage storage
}

bloat_install () {
    brew install pipes-sh
    sudo apt-get $flags install neofetch cmatrix
    sudo apt-get $flags install cowsay                 # A cow displaying text
    sudo apt-get $flags install fortune                # Random quotes
}

ubuntu_install() {
    # GUI
    sudo apt-get $flags install gnome-screensaver      # Screensaver
    sudo apt-get $flags install thunderbird            # Email
    sudo apt-get $flags install transmission           # A simpler Torrent D.
    sudo apt-get $flags install timeshift              # Backups
    sudo apt-get $flags install gparted                # Manage partitions
    sudo apt-get $flags install vlc                    # Media player
    sudo apt-get $flags install pavucontrol            # Audio
    sudo apt-get $flags install virtualbox-qt          # Virtual machines
    sudo apt-get $flags install cpu-checker qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils
    # sudo pip3 install spotify-cli-linux       # Spotify
    sudo apt-get $flags install LXAppearance           # Theme
    sudo apt-get $flags install chromium-browser       # Web browser

    if [[ $FirstRun == y ]]; then
        sudo adduser `id -un` libvirt
        sudo adduser `id -un` kvm
    fi
}

albert_install () {
    if ! command -v albert 2>/dev/null; then
        cd $HOME
        curl https://build.opensuse.org/projects/home:manuelschneid3r/public_key | sudo apt-key add -
        echo 'deb http://download.opensuse.org/repositories/home:/manuelschneid3r/xUbuntu_20.04/ /' | sudo tee /etc/apt/sources.list.d/home:manuelschneid3r.list
        sudo wget -nv https://download.opensuse.org/repositories/home:manuelschneid3r/xUbuntu_20.04/Release.key -O "/etc/apt/trusted.gpg.d/home:manuelschneid3r.asc"
        sudo apt-get update
        sudo apt-get install albert
    fi
}

brew_install () {
    cd $HOME
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
    eval $(/home/linuxbrew/.linuxbrew/bin/brew shellenv)
    brew update
    brew upgrade
    brew install gcc patchelf graphviz
    brew install exa                            # "ls" on steroids
}

chrome_install () {
    wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
    sudo apt install ./google-chrome-stable_current_amd64.deb
    rm google-chrome-stable_current_amd64.deb
}

emacs_install () {
    
    sudo apt-get $flags install emacs-gtk              # Emacs
    # Doom
    sudo apt-get $flags install git ripgrep            # required dependencies
    sudo apt-get $flags install tar fd-find clang      # optional dependencies
}

i3_install () {
    sudo add-apt-repository ppa:kgilmer/speed-ricer
    sudo apt-get update
    sudo apt-get $flags install i3-gaps
    sudo apt-get $flags install feh compton rofi i3blocks python-dbus player-ctl pulseaudio
    # Add current user to group video, type groups to see which groups you are in
    sudo usermod -a -G video $LOGNAME
    # Light setup | Enables brightness controls
    git clone https://github.com/haikarainen/light
    ./autogen.sh
    ./configure && make
    sudo make install

    ./configure --with-udev && make
    sudo make install
}

snaps_install() {
    sudo snap install spotify
    sudo snap install discord
    sudo snap install walc
    #sudo snap install ao
    sudo snap install android-studio --classic
    sudo snap install skype --classic
    #sudo snap install atom --classic
    sudo snap install slack --classic
}

steam_install () {
    wget https://repo.steampowered.com/steam/archive/precise/steam_latest.deb
    sudo apt install ./steam_latest.deb
    rm steam_latest.deb
}

vim_install () {
    cd $HOME 
    vim +PlugInstall +qall                      # Update plugins
    bash $HOME/scripts/ycm                      # Vim YouCompleteMe plugin install
    sudo npm install -g neovim                  # npm on neovim
    python3 -m pip install --user --upgrade pynvim # Python for neovim
    sudo gem install neovim                     # Gem for neovim
}
